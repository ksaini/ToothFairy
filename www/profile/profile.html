<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8" />
      <meta name="format-detection" content="telephone=no" />
      <meta name="msapplication-tap-highlight" content="no" />
      <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
      <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
      <!---<meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" />---->
      
	  <link href="../assets/css/font-awesome.min.css" rel="stylesheet">
      <link rel="stylesheet" type="text/css" href="../css/index.css" />
      <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
	  <link href="../css/bootstrap-datetimepicker.min.css" rel="stylesheet">
	  
	  <script src="../js/moment.min.js"></script>   
<script src="../js/jquery-1.10.2.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/bootstrap-datetimepicker.min.js"></script>
	  <script src="../assets/js/bootstrap-datetimepicker.min.js"></script>
      <title>GreyBox Admin</title>
	  <style>
body {
	#background-image:url(img/s71.png);
	background-size: 100% 100%;
    width: 100%;
    height: 100%;
    height: auto !important;
    min-height:100%;
	text-transform:inherit;
	height: 100%;
	
}	
.chat
{
    list-style: none;
    margin: 0;
    padding-top: 5px;
	padding-bottom: 10px;
	padding-left:15px;
	padding-right:5px;
	border-bottom:1px solid #E0E0E0;
	
}

.chat li
{
    margin-bottom: 2px;
    padding-bottom: 2px;
	color:#B3A9A9;
	border-bottom: 1px dotted #B3A9A9;
	height:30px;
	vertical-align:middle;
	font-size:15px;
}

.chat li.left .chat-body
{
    margin-left: 60px;
}

.chat li.right .chat-body
{
    margin-right: 60px;
	
}

.valtext {
	font-family: 'open_sans','Open Sans',sans-serif;
    font-size: 14px;
    font-weight: 500;
	color: #4F545B;
	contenteditable = true;
	box-shadow: none;
	border-bottom: 0px;
	border-top: 0px;
	border-left: 0px;
	border-right: 0px;
	margin-bottom:0px;
	letter-spacing: 1px;
}

.chat li .chat-body p
{
    margin: 0;
	width:100%;
    color: #F5F5F5;
}

.panel .slidedown .glyphicon, .chat .glyphicon
{
    margin-right: 5px;
}

.sticky {
  
}

.stickyfooter {
  position: fixed;
  bottom:0;
}
.panel-body
{
    overflow-y: scroll;
	min-height: 730px;
    height: 100%;
	padding-top: 45px;
}
.panel-footer{
	padding: 1px 5px;
}
.slots{
 background-color:#eee;
}
.slots:focus {outline:0;}

::-webkit-scrollbar-track
{
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
    background-color: #F5F5F5;
}

.navbar-custom{
	background-color: #8159bb;
}
a{
	color:white
}

input:focus,
select:focus,
button:focus {
    outline: none;
}
.desc {
	font-size:18px;
	font-family: 'open_sans','Open Sans',sans-serif;
	letter-spacing: 2px;
	color: #4F545B;
	padding-top:15px;
	padding-bottom:15px;
}
.goto{
	padding-right:15px;
	padding-left:15px;
	font-size:24px;
}
.editmed {
	padding-right:10px;
}
.editmed:focus {
	color:darkslateblue;
	font-size:16px;
	font-weight:600;
}
</style>
     
   </head>
   <body >
     
<nav class="navbar navbar-custom navbar-fixed-top" ">
  <div class="container-fluid">
    <div class="navbar-header" >
      <a class="navbar-brand" style="width:100%;text-align:center;" href="../dashboard.html"><i style="position: absolute;left:5px;;" class="fa fa-home" aria-hidden="true"></i> <span style="font-size:14px;">Manage Profile</span></a>
    </div>
   
  </div>
</nav>
<div class="container">
    <div class="row">
        <div class="col-sm-5" style="padding-right:0px;padding-left:0px;">
            <div class="panel panel-primary">
                <div class="panel-body" id="p0"> 
				<div class="sticky">
					<div class="row " style="border-bottom: 1px solid #E0E0E0;">
						
						<div class="content col-xs-12" >
							<h3 style="text-align:center;">Settings<h3>
						</div>
                </div>
				
			</div>
			<ul class="chat desc" >
				Personal Details <span class="pull-right goto" onclick='viewprofile(this.parentNode)'> +</span>
			</ul>
			<ul class="chat desc prolist">
				Procedure & Cost <span class="pull-right goto"  onclick="manageTMT(this.parentNode)"> +</span><span id='s1' style="display:none;" onclick='saveProc()' data-toggle="modal" data-target="#myModal"><i class="fa fa-save pull-right goto " style="font-size:18px;padding-top:7px;"></i></span>
			</ul>
			<ul class="chat desc medilist" >
				Medecines & Brands <span class="pull-right goto" onclick="manageMed(this.parentNode)"> +</span><span id='s2' style="display:none;" onclick='saveMed()'><i class="fa fa-save pull-right goto " style="font-size:18px;padding-top:7px;"></i></span>
			</ul>
			<ul class="chat desc" >
				Examination Types <span class="pull-right goto" onclick="manageExm(this.parentNode)"> +</span>
			</ul>
			</div>
		</div>	
		
	</div>
</div>
</div>
<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
       
        <h4 class="modal-title"></h4>
      </div>
      <div class="modal-body">
        <p>Saving...</p>
      </div>
      
    </div>

  </div>
</div>
 <script type="text/javascript" src="../js/dataTbl.js"></script>
  <script type="text/javascript" src="../js/examination.json"></script>
  
<script>
	var did = localStorage.did;
	var tmt =0;
	var med =0;
	var exam =0;
	var profile=0;
	var fn = base_url + "/json/" + did + ".js";
	
	loadJS(fn);
	
	
		
	function manageExm(t){
		$('ul > li').hide();
	if(exam==0){	
		$('span:first', t).html("-");
		var e = JSON.parse(exm);
		var txt = "<li></li>";
		Object.keys(e).forEach(function(key) {
		  if(e[key]==1)
			txt +=  "<li>" + key + "</li>";
		  else
            txt +=  "<li style='padding-left:10px;'>" + key + "</li>";		  
			
		});
		t.innerHTML += txt;
		exam = 1;
	}else{
		exam=0;
		$('span:first', t).html("+");
		}
	}
	function manageTMT(t){
		$('ul > li').hide();
		if(tmt ==0 ){ // add for the first time
			addTMT(t);
		}
		// If + then expand
		
		if($('span:first', t).text().includes("+")){
			$('span:first', t).html("-");
			$('.prolist > li').show();
			$("#s1").show();
			$("#s2").hide();
		}
		else if($('span:first', t).text().includes("-")){
			$('span:first', t).html("+");
			$('.prolist > li').hide();
			$("#s1").hide();
			$("#s2").hide();
		}
			
		
	}
	function addTMT(t){
		var txt = "<li></li>";
		for(var i=0;i < treatements.length;i++){
		    var t0 =  treatements[i].split(":")[0];
			var t1 =  treatements[i].split(":")[1];
			txt += "<li class='editmed' contenteditable=true>" + t0 + "<span class='pull-right editmed' contenteditable=true >" + t1 + "</span></li>";
		}
		t.innerHTML += txt;
		tmt = 1;
	}
	
	function manageMed(t){
		$('ul > li').hide();
		if(med ==0 ){ // add for the first time
			addMed(t);
		}
		// If + then expand
		
		if($('span:first', t).text().includes("+")){
			$('span:first', t).html("-");
			$('.medilist > li').show();
			$("#s2").show();
			$("#s1").hide();
		}
		else if($('span:first', t).text().includes("-")){
			$('span:first', t).html("+");
			$("#s1").hide();
			$("#s2").hide();
			$x = $(".prolist");
			$('span:first', x).html("+");
			$('.medilist > li').hide();
			
		}
	
	}
	function addMed(t){
		var txt = "<li></li>";
		for(var i=0;i < medicines.length;i++){
			txt += "<li class='editmed' contenteditable=true>" + medicines[i]  + "</li>";
		}
		t.innerHTML += txt;
		med = 1;
	}
	
	function viewprofile(t){
		$('ul > li').hide();
	if(profile==0){	
		$('span:first', t).html("-");
		var txt = "<li></li>";
		txt += "<li>Name : " + localStorage.dname + "</li>"; 
		t.innerHTML += txt;
		profile = 1;
	}else{
		profile=0;
		$('span:first', t).html("+");
		}
	}
	function saveProc(n){
		var array = [];
		var ele = '.prolist li';
		
		$(ele).each(function(i, li) {
			var txt = $(li).clone().children().remove().end().text() + ":" + $('span:first', $(li)).text();
			if(txt.length > 3)
				array.push(txt);
		});
		var q = "0&did=" + localStorage.did + "&data=" + JSON.stringify(array);
		
		getData(q,1,"saveProc.php",s1,e1);
	}
	function saveMed(n){
		var array1 = [];
		var ele = '.medilist li';
		$(ele).each(function(i, li) {
			var txt = $(li).text();
			if(txt.length > 3)
				array1.push(txt);
		});
		var q = "1&did=" + localStorage.did + "&data=" + JSON.stringify(array1);
		
		getData(q,1,"saveProc.php",s1,e1);
	}
	function e1(){
		$("#myModal").modal('toggle');
		location.reload();
	}
	function s1(data){
		$("#myModal").modal('toggle');
		location.reload();
	}
//var treatements = ["Advance Surgical Procedure:300","Consultation:250","Crown Cementation:200","Crown MLS:220","Crown Sirconia:290","Crown Zirconia:300","Crowns:600","Dental Implant:2000","Dentures:1200","Fillings:600","Fluoride Treatment:700","Bridge:330"];
//var medicines = ["Cappol 350mg","Cappol 250mg","Dolo 500mg","Dolo -S 500mg","Dolo 600mg","Glycodine 100ug - S","Medicine x1 200","Acypser 300 DX","Acypser 300 SX"];
</script>	